<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RestaurantBackEnd | ProdInfo</title>

    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="css/flaticon.css" type="text/css" />
    <link rel="stylesheet" href="css/barfiller.css" type="text/css" />
    <link rel="stylesheet" href="css/magnific-popup.css" type="text/css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css" />
    <link rel="stylesheet" href="css/nice-select.css" type="text/css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css" />
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />
    <link rel="stylesheet" href="css/fontawesome_6.2.0.css" type="text/css" />
    <link rel="stylesheet" href="css/reservation.css" type="text/css" />
    <link
      rel="stylesheet"
      href="css/member_page_overview.css"
      type="text/css"
    />
    <link rel="stylesheet" href="css/alice_style.css" type="text/css" />

    <style>
      .nice-select {
        width: 80%;
      }
      #prodMainPic {
        display: none;
      }

      .prodPic {
        width: 250px;
        aspect-ratio: 16/9;
        background: #ddd;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #aaa;
        border: 2px dashed currentcolor;
        cursor: pointer;
        font-family: sans-serif;
        transition: color 300ms ease-in-out, background 300ms ease-in-out;
        outline: none;
        overflow: hidden;
      }

      .prodPic:hover {
        color: #777;
        background: #ccc;
      }

      .prodPic:active {
        border-color: turquoise;
        color: turquoise;
        background: #eee;
      }

      .prodPic:focus {
        color: #777;
        background: #ccc;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      }

      .prodMainPic_image {
        max-width: 100%;
      }
    </style>
  </head>
  <body>
    <!-- Page Preloder -->
    <div id="preloder">
      <div class="loader"></div>
    </div>

  <!-- Offcanvas Menu Begin -->
  <div class="offcanvas-menu-overlay"></div>
  <div class="offcanvas-menu-wrapper">
    <div class="offcanvas__cart">
      <div class="offcanvas__cart__links">
        <a href="#" class="search-switch"><img src="img/icon/search.png" alt="" /></a>
        <a href="#"><img src="img/icon/heart.png" alt="" /></a>
      </div>
      <div class="offcanvas__cart__item">
        <a href="#"><img src="img/icon/cart.png" alt="" /> <span>0</span></a>
        <div class="cart__price">Cart: <span>$0.00</span></div>
      </div>
    </div>
    <div class="offcanvas__logo">
      <a href="./GoodEatTime.html"><img class="GoodEatTimelogo" src="/img/GoodEatTime_smlogo.png" alt="" /></a>
    </div>
    <div id="mobile-menu-wrap"></div>
    <div class="offcanvas__option">
      <ul>
        <li>
          USD <span class="arrow_carrot-down"></span>
          <ul>
            <li>EUR</li>
            <li>USD</li>
          </ul>
        </li>
        <li>
          ENG <span class="arrow_carrot-down"></span>
          <ul>
            <li>Spanish</li>
            <li>ENG</li>
          </ul>
        </li>
        <li>
          <a href="#">Sign in</a> <span class="arrow_carrot-down"></span>
        </li>
      </ul>
    </div>
  </div>
  <!-- Offcanvas Menu End -->

  <!-- Header Section Begin -->
  <header class="header">
    <div class="header__top">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="header__top__inner">
              <div class="header__top__left">
                <ul>
                  <li>
                    <img class="login_icon" src="./img/Login_icon.png" /><a class="login_text" href="#">登入</a>
                  </li>
                </ul>
              </div>
              <div class="header__logo">
                <a href="./GoodEatTime.html"><img class="goodeattime_logo" src="img/GoodEatTime_logoright.png"
                    alt="" /></a>
              </div>
              <div class="header__top__right">
                <div class="header__top__right__links">
                  <a href="" class="search-switch"><img src="img/icon/search.png" alt="" /></a>
                  <a href="#"><img src="img/icon/heart.png" alt="" /></a>
                </div>
                <div class="header__top__right__cart">
                  <a href="#"><img src="img/icon/cart.png" alt="" /> <span>0</span></a>
                  <div class="cart__price">Cart: <span>$0.00</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="canvas__open"><i class="fa fa-bars"></i></div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <nav class="header__menu mobile-menu">
            <ul>
              <!-- ===餐廳後台消息通知跑馬燈=== -->
              <div class=" marquee text-white">
                <marquee id="marquee" scrollamount="8" direction="left">
                  [好食光重要通知]防詐騙提醒!近來有不肖業者偽冒好食光客服，蓄意詐騙錢財、竊取資料，請餐飲業者們先聯繫好食光平台查證哦!
                </marquee>
              </div>
              <!-- ===餐廳後台消息通知跑馬燈=== -->
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </header>
  <!-- Header Section End -->

    <!-- Class Section Begin -->
    <section class="class">
      <!-- <div class="container"> -->
      <div class="row" id="member">
        <!-- <div class="col-lg-2" id="left"> -->
        <div class="col-lg-2" id="left">
          <nav class="header__menu mobile-menu" id="aaa">
            <ul>
              <li><a href="./restaurant_info-management.html">餐廳資訊</a></li>
              <li class="active"><a href="./restaurantbackend_prodinfo.html">商品管理</a></li>
              <li><a href="./restaurantbackend_ordersearch.html">訂單管理</a></li>
              <li><a href="./restaurant_reserve-management.html">訂位管理</a></li>
              <li><a href="./restaurantbackend_comment.html">評論管理</a></li>
              <li><a href="./coupon_restaurant.html">優惠券設定</a></li>
              <li><a href="./G3_alice_adOrder_restaurant.html">廣告訂單</a></li>
              <li><a href="./G3_alice_adOrder_purchase_restaurant.html">購買廣告</a></li>
              </li>
            </ul>
          </nav>
        </div>
        <!-- 中間空白欄位 -->
        <!-- 上排 -->
        <div class="col-lg-10">
          <div class="row">
            <div class="col-1"></div>
            <div class="col-10">
              <div class="container">
                <form action method="POST">
                  <div class="row">
                    <div class="col">
                      <br />
                      <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                          <div class="form-group">
                            <label for="prodName">商品名稱：</label>
                            <input
                              type="text"
                              name="prodName"
                              id="prodName"
                              placeholder="此為必填欄位"
                            />
                          </div>
                        </div>
                      </div>
                      <br />
                      <div class="row">
                        <div
                          class="col-lg-12 col-md-12 col-sm-12 col-xs-12"
                          style="margin-bottom: 15px"
                        >
                          <div class="form-group">
                            <label for="prodCategoryNo">商品類別：</label>
                            <select
                              required="true"
                              name="prodCategoryNo"
                              id="prodCategoryNo"
                            >
                              <option>此為必填欄位</option>
                              <option value="1">日式料理</option>
                              <option value="2">義式料理</option>
                              <option value="3">中式料理</option>
                              <option value="4">美式料理</option>
                              <option value="5">法式料理</option>
                              <option value="6">港式料理</option>
                              <option value="7">泰式料理</option>
                              <option value="8">台灣料理</option>
                              <option value="9">創意料理</option>
                              <option value="10">烘焙甜點</option>
                            </select>
                          </div>
                        </div>
                      </div>
                      <br />
                      <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                          <div class="form-group">
                            <label for="prodStock">商品庫存：</label>
                            <input
                              type="text"
                              name="prodStock"
                              id="prodStock"
                              placeholder="此為必填欄位"
                            />
                          </div>
                        </div>
                      </div>
                      <br />
                      <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                          <div class="form-group">
                            <label for="prodPrice">商品價格：</label>
                            <input
                              type="text"
                              name="prodPrice"
                              id="prodPrice"
                              placeholder="此為必填欄位"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col">
                      <br />
                      <div class="row">
                        <div class="">
                          <div class="form-group">
                            <label for="prodDescription">商品說明：</label>
                            <textarea
                              name="prodDescription"
                              id="prodDescription"
                              cols="25"
                              rows="5"
                            ></textarea>
                          </div>
                        </div>
                      </div>
                      <br />
                      <div class="row">
                        <div class="">
                          <div class="form-group">
                            <label for="prodContent">商品規格：</label>
                            <textarea
                              name="prodContent"
                              id="prodContent"
                              cols="25"
                              rows="5"
                            ></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col">
                      <br />
                      <div class="row">
                        <div class="form-group">
                          <label class="prodMainPic_text">商品圖片：</label>
                          <label class="prodPic" for="prodMainPic" tabindex="0">
                            <span class="prodMainPic_image"></span>
                          </label>
                          <input
                            type="file"
                            name="prodMainPic"
                            id="prodMainPic"
                            multiple
                            accept="image/*"
                          />
                        </div>
                        <div class="col-lg-8 submit">
                          <div
                            class="form-group"
                            style="
                              align-items: center;
                              display: grid;
                              justify-content: right;
                            "
                          >
                            <input
                              type="button"
                              id="submit_btn"
                              class="submit_btn"
                              value="商品資料上傳"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
            <div class="col-1"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Class Section End -->

  <!-- Footer Section Begin -->
  <footer class="footer set-bg" data-setbg="img/footer_bg.jpg">
    <div class="mask">
      <div>
        <div class="row">
          <div class="col-lg-3 col-md-3 col-sm-3">
            <div class="footer__member">
              <h6>會員專區</h6>
              <div class="footer__social">
                <a href="./j_signin_member3.html">登入會員<i></i></a>
                <a href="./member_reservation.html">訂位管理<i></i></a>
                <br />
                <a href="./j_registration_member3.html">加入會員<i></i></a>
                <a href="./member_order.html">訂單管理<i></i></a>
                <br />
                <a href="./coupon_member.html">優惠券&nbsp&nbsp&nbsp&nbsp<i></i></a>
                <a href="./member_comment.html">我的評論<i></i></a>
              </div>
            </div>
          </div>
          <div class="col-lg-2 col-md-3 col-sm-3">
            <div class="footer__restaurant">
              <h6>餐廳</h6>
              <div class="footer__social">
                <a href="#">訂位<i></i></a>
                <br />
                <a href="#">購物車<i></i></a>
              </div>
            </div>
          </div>
          <div class="col-lg-2 col-md-3 col-sm-3">
            <div class="footer__shopping">
              <h6>線上商城</h6>
              <div class="footer__social">
                <a href="./shopping_mall.html">商品搜尋<i></i></a>
                <br />
                <a href="./shopping_cart.html">購物車<i></i></a>
              </div>
            </div>
          </div>
          <div class="col-lg-2 col-md-3 col-sm-3">
            <div class="footer__aboutus">
              <h6>關於我們</h6>
              <div class="footer__social">
                <a href="#">網站介紹<i></i></a>
                <br />
                <a href="#">履歷<i></i></a>
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-md-9 col-sm-12">
            <div class="footer__widget">
              <h6>好食光</h6>
              <ul>
                <li>指導老師：</li>
                <li>吳永志老師 &nbsp; | &nbsp; 吳冠宏老師</li>
                <li>張互賓老師 &nbsp; | &nbsp; 馬全德老師</li>
                <li>郭惠民老師 &nbsp; | &nbsp; 陳怡榕老師</li>
                <li>組員 :</li>
                <li>陳宜瀅 &nbsp; | &nbsp; 張家銘 &nbsp; | &nbsp; 楊婕妤</li>
                <li>游育碩 &nbsp; | &nbsp; 黃郁婕</li>
                <li>李佳欣 &nbsp; | &nbsp; 余可凡</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="copyright">
      <div class="container">
        <div class="row">
          <div class="col-lg-7">
            <p class="copyright__text text-white">
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
              Copyright &copy;
              <script>
                document.write(new Date().getFullYear());
              </script>
              All rights reserved | This template is made with
              <i class="fa fa-heart" aria-hidden="true"></i> by
              <a href="https://colorlib.com" target="_blank">Colorlib</a>
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
          </div>
          <div class="col-lg-5">
            <div class="copyright__widget">
              <ul>
                <li><a href="#">Privacy Policy</a></li>
                <li><a href="#">Terms & Conditions</a></li>
                <li><a href="#">Site Map</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <!-- Footer Section End -->

    <!-- Search Begin -->
    <div class="search-model">
      <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-switch">+</div>
        <form class="search-model-form">
          <input type="text" id="search-input" placeholder="Search here....." />
        </form>
      </div>
    </div>
    <!-- Search End -->

    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.barfiller.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.nicescroll.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/logged_restaurant.js"></script>
    <!-- <script src="js/reservation.js"></script> -->
    <!-- <script src="js/alice.js"></script> -->

    <script>
      // 預覽圖片
      const inputFile = document.querySelector("#prodMainPic");
      const pictureImage = document.querySelector(".prodMainPic_image");
      const pictureImageTxt = "可以選擇一張圖片";
      pictureImage.innerHTML = pictureImageTxt;

      inputFile.addEventListener("change", function (e) {
        const inputTarget = e.target;
        const file = inputTarget.files[0];

        if (file) {
          const reader = new FileReader();

          reader.addEventListener("load", function (e) {
            const readerTarget = e.target;

            const img = document.createElement("img");
            img.src = readerTarget.result;
            img.classList.add("prodMainPic_image");

            pictureImage.innerHTML = "";
            pictureImage.appendChild(img);
          });

          reader.readAsDataURL(file);
        } else {
          pictureImage.innerHTML = pictureImageTxt;
        }
      });
    </script>
    <script>
      // POST

      let restaurantMemberVO = JSON.parse(
        sessionStorage.getItem("restaurantMemberVO")
      );
      console.log(restaurantMemberVO);

      const URL = "http://localhost:8080/product/addProdInfo";
      const submit_btn = document.getElementById("submit_btn");
      submit_btn.addEventListener("click", function () {
        let updateName = document.querySelector("#prodName").value;
        let updateCategoryNo = parseInt(
          document.querySelector("#prodCategoryNo").value
        );
        let updateStock = parseInt(document.querySelector("#prodStock").value);
        let updatePrice = parseInt(document.querySelector("#prodPrice").value);
        let updateDescription =
          document.querySelector("#prodDescription").value;
        let updateContent = document.querySelector("#prodContent").value;
        let updateRestaurantNo = restaurantMemberVO.restaurantNo;
        console.log(updateRestaurantNo);

        const fileReader = new FileReader();
        fileReader.onload = (event) => {
          let updateProdMainPicStr = btoa(event.target.result);
          fetch(URL, {
            method: "POST",
            headers: { "Content-type": "application/json" },
            body: JSON.stringify({
              restaurantNo: updateRestaurantNo,
              prodName: updateName,
              prodCategoryNo: updateCategoryNo,
              prodStock: updateStock,
              prodPrice: updatePrice,
              prodDescription: updateDescription,
              prodContent: updateContent,
              prodMainPicStr: updateProdMainPicStr,
            }),
          })
            .then((r) => r.json()) // 接收到回傳的物件，再用 .json() analyze資料
            .then((data) => {
              console.log(data);
              alert("成功新增商品 !");
              location.reload();
            });
        };
        fileReader.readAsBinaryString(inputFile.files[0]);
      });
    </script>
  </body>
</html>
