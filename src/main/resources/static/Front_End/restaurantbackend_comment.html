<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>RestaurantBackEnd | Comment</title>

    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="css/flaticon.css" type="text/css" />
    <link rel="stylesheet" href="css/barfiller.css" type="text/css" />
    <link rel="stylesheet" href="css/magnific-popup.css" type="text/css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css" />
    <link rel="stylesheet" href="css/nice-select.css" type="text/css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css" />
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />
    <link rel="stylesheet" href="css/fontawesome_6.2.0.css" type="text/css" />
    <link rel="stylesheet" href="css/reservation.css" type="text/css" />
    <link
      rel="stylesheet"
      href="css/member_page_overview.css"
      type="text/css"
    />
    <link rel="stylesheet" href="css/alice_style.css" type="text/css" />
  </head>
  <style>
    .nice-select {
      width: 80%;
    }
    table,
    tr,
    th,
    td {
      border: 1px solid black;
    }
  </style>

  <body>
    <!-- Page Preloder -->
    <div id="preloder">
      <div class="loader"></div>
    </div>

    <!-- Offcanvas Menu Begin -->
    <div class="offcanvas-menu-overlay"></div>
    <div class="offcanvas-menu-wrapper">
      <div class="offcanvas__cart">
        <div class="offcanvas__cart__links">
          <a href="#" class="search-switch"
            ><img src="img/icon/search.png" alt=""
          /></a>
          <a href="#"><img src="img/icon/heart.png" alt="" /></a>
        </div>
        <div class="offcanvas__cart__item">
          <a href="#"><img src="img/icon/cart.png" alt="" /> <span>0</span></a>
          <div class="cart__price">Cart: <span>$0.00</span></div>
        </div>
      </div>
      <div class="offcanvas__logo">
        <a href="./GoodEatTime.html"
          ><img
            class="GoodEatTimelogo"
            src="/img/GoodEatTime_smlogo.png"
            alt=""
        /></a>
      </div>
      <div id="mobile-menu-wrap"></div>
      <div class="offcanvas__option">
        <ul>
          <li>
            USD <span class="arrow_carrot-down"></span>
            <ul>
              <li>EUR</li>
              <li>USD</li>
            </ul>
          </li>
          <li>
            ENG <span class="arrow_carrot-down"></span>
            <ul>
              <li>Spanish</li>
              <li>ENG</li>
            </ul>
          </li>
          <li>
            <a href="#">Sign in</a> <span class="arrow_carrot-down"></span>
          </li>
        </ul>
      </div>
    </div>
    <!-- Offcanvas Menu End -->

    <!-- Header Section Begin -->
    <header class="header">
      <div class="header__top">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <div class="header__top__inner">
                <div class="header__top__left">
                  <ul>
                    <li>
                      <img class="login_icon" src="./img/Login_icon.png" /><a
                        class="login_text"
                        href="#"
                        >登入</a
                      >
                    </li>
                  </ul>
                </div>
                <div class="header__logo">
                  <a href="./GoodEatTime.html"
                    ><img
                      class="goodeattime_logo"
                      src="img/GoodEatTime_logoright.png"
                      alt=""
                  /></a>
                </div>
                <div class="header__top__right">
                  <div class="header__top__right__links">
                    <a href="" class="search-switch"
                      ><img src="img/icon/search.png" alt=""
                    /></a>
                    <a href="#"><img src="img/icon/heart.png" alt="" /></a>
                  </div>
                  <div class="header__top__right__cart">
                    <a href="#"
                      ><img src="img/icon/cart.png" alt="" /> <span>0</span></a
                    >
                    <div class="cart__price">Cart: <span>$0.00</span></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="canvas__open"><i class="fa fa-bars"></i></div>
        </div>
      </div>
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <nav class="header__menu mobile-menu"></nav>
          </div>
        </div>
      </div>
    </header>
    <!-- Header Section End -->

    <!-- Class Section Begin -->
    <section class="class">
      <!-- <div class="container"> -->
      <div class="row" id="member">
        <!-- <div class="col-lg-2" id="left"> -->
        <div class="col-lg-2" id="left">
          <nav class="header__menu mobile-menu" id="aaa">
            <ul>
              <li class=""><a href="http">餐廳會員首頁</a></li>
              <li class=""><a href="http">餐廳資訊</a></li>
              <li class=""><a href="http">訂單管理</a></li>
              <li class=""><a href="http">訂位管理</a></li>
              <li class=""><a href="http">評論管理</a></li>
              <li class=""><a href="http">優惠券設定</a></li>
              <li class=""><a href="http">商品管理</a></li>
              <li class=""><a href="http">銷售報表</a></li>
              <li class=""><a href="http">購買廣告</a></li>
            </ul>
          </nav>
        </div>
        <!-- 中間空白欄位 -->
        <!-- 上排 -->
        <div class="col-lg-10">
          <div
            class="row-cols-12"
            style="
              align-items: center;
              display: grid;
              justify-content: center;
              height: 15%;
              background-color: #fdf3ea;
            "
          >
            <h2>評論管理</h2>
          </div>
          <div class="row" style="height: 80%">
            <div
              class="row-cols-12"
              style="background-color: #fdf3ea; margin: 15px; padding: 33px"
            >
              <div class="container" style="height: 90%">
                <div class="row-cols-12" style="height: 90%">
                  <form action method="POST">
                    <br />
                    <div class="form-group">
                      <div
                        class="col-lg-12 col-md-12 col-sm-12 col-xs-12"
                        style="margin-bottom: 15px"
                      >
                        <label for="commentFor">評論對象：</label>
                        <select name="commentFor" id="commentFor">
                          <option value="餐廳評論">餐廳評論</option>
                          <option value="商品評論">商品評論</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <label for="name">評論帳號：</label>
                        <input type="text" name="name" id="name" />
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <label for="commentProd">評論商品：</label>
                        <input
                          type="text"
                          name="commentProd"
                          id="commentProd"
                        />
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <label for="commentTime">評論日期：</label>
                        <input
                          type="date"
                          name="commentTime"
                          id="commentTime"
                        />
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <label for="commentRating">評論星等：</label>
                        <input
                          type="number"
                          name="commentRating"
                          id="commentRating"
                        />
                      </div>
                      <div class="col-lg-8 submit">
                        <div class="form-group">
                          <input
                            type="button"
                            id="submit_btn"
                            class="submit_btn"
                            value="評論查詢"
                          />
                        </div>
                      </div>
                    </div>
                  </form>
                  <div>
                    _______________________________________________________________________________________________________________________
                  </div>
                  <table class="prodcommmentList">
                    <thead>
                      <tr>
                        <th>評論對象</th>
                        <th>評論ID</th>
                        <th>評論商品</th>
                        <th>評論日期</th>
                        <th>評論星等</th>
                        <th>回覆評論</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>from table: reservation/ prodOrderDetail</td>
                        <td>from table: reservation/ prodOrderDetail</td>
                        <td>from table: reservation/ prodOrderDetail</td>
                        <td>from table: reservation/ prodOrderDetail</td>
                        <td>from table: reservation/ prodOrderDetail</td>
                        <td>
                          <a
                            href="http://localhost:8080/Front_End/restaurantbackend_commentreply.html"
                            >修改</a
                          >
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <table class="restcommmentList">
                    <thead>
                      <tr>
                        <th>評論對象</th>
                        <th>評論ID</th>
                        <th>評論日期</th>
                        <th>評論星等</th>
                        <th>回覆評論</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>from table: reservation/ prodOrderDetail</td>
                        <td>from table: reservation/ prodOrderDetail</td>
                        <td>from table: reservation/ prodOrderDetail</td>
                        <td>from table: reservation/ prodOrderDetail</td>
                        <td>
                          <a
                            href="http://localhost:8080/Front_End/restaurantbackend_commentreply.html"
                            >修改</a
                          >
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Class Section End -->

    <!-- Footer Section Begin -->
    <footer class="footer set-bg" data-setbg="img/footer_bg.jpg">
      <div class="mask">
        <div>
          <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-3">
              <div class="footer__member">
                <h6>會員專區</h6>
                <div class="footer__social">
                  <!-- @Footer連結請更改 -->
                  <a href="./j_signin_member3.html">登入會員<i></i></a>
                  <a href="./member_reservation.html">訂位管理<i></i></a>
                  <br />
                  <a href="./j_registration_member3.html">加入會員<i></i></a>
                  <a href="./member_order.html">訂單管理<i></i></a>
                  <br />
                  <a href="./coupon_member.html">優惠券<i></i></a>
                  <a href="./member_comment.html">我的評論<i></i></a>
                </div>
              </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-3">
              <div class="footer__restaurant">
                <h6>餐廳</h6>
                <div class="footer__social">
                  <!-- @這裡不確定要連去哪裡... -->
                  <a href="#">訂位<i></i></a>
                  <br />
                  <a href="#">購物車<i></i></a>
                </div>
              </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-3">
              <div class="footer__shopping">
                <h6>線上商城</h6>
                <div class="footer__social">
                  <!-- @Footer連結請更改 -->
                  <a href="./shopping_mall.html">商品搜尋<i></i></a>
                  <br />
                  <a href="./shopping_cart.html">購物車<i></i></a>
                </div>
              </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-3">
              <div class="footer__aboutus">
                <h6>關於我們</h6>
                <div class="footer__social">
                  <!-- @這裡也還不知道要連去哪裡... -->
                  <a href="#">網站介紹<i></i></a>
                  <br />
                  <a href="#">履歷<i></i></a>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-9 col-sm-12">
              <div class="footer__widget">
                <h6>好食光</h6>
                <ul>
                  <li>指導老師：</li>
                  <li>吳永志老師 &nbsp; | &nbsp; 吳冠宏老師</li>
                  <li>張互賓老師 &nbsp; | &nbsp; 馬全德老師</li>
                  <li>郭惠民老師 &nbsp; | &nbsp; 陳怡榕老師</li>
                  <li>組員 :</li>
                  <li>陳宜瀅 &nbsp; | &nbsp; 張家銘 &nbsp; | &nbsp; 楊婕妤</li>
                  <li>游育碩 &nbsp; | &nbsp; 黃郁婕</li>
                  <li>李佳欣 &nbsp; | &nbsp; 余可凡</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="copyright">
        <div class="container">
          <div class="row">
            <div class="col-lg-7">
              <p class="copyright__text text-white">
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                Copyright &copy;
                <script>
                  document.write(new Date().getFullYear());
                </script>
                All rights reserved | This template is made with
                <i class="fa fa-heart" aria-hidden="true"></i> by
                <a href="https://colorlib.com" target="_blank">Colorlib</a>
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
              </p>
            </div>
            <div class="col-lg-5">
              <div class="copyright__widget">
                <ul>
                  <li><a href="#">Privacy Policy</a></li>
                  <li><a href="#">Terms & Conditions</a></li>
                  <li><a href="#">Site Map</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- Footer Section End -->

    <!-- Search Begin -->
    <div class="search-model">
      <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-switch">+</div>
        <form class="search-model-form">
          <input type="text" id="search-input" placeholder="Search here....." />
        </form>
      </div>
    </div>
    <!-- Search End -->

    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.barfiller.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.nicescroll.min.js"></script>
    <script src="js/main.js"></script>
    <!-- <script src="js/reservation.js"></script> -->
    <script src="js/alice.js"></script>

    <script>
      const URL = "http://localhost:8080/prodcomment/NotNullComment"; // if 迴圈裡已經直接指定路徑。
      const submit_btn = document.getElementById("submit_btn");
      let resultList;
      submit_btn.addEventListener("click", function () {
        console.log(
          document.querySelector("div.nice-select span.current").innerText
        );
        let choice = document.querySelector(
          "div.nice-select span.current"
        ).innerText;
        if (choice == "餐廳評論") {
          fetch("http://localhost:8080/restaurantcomment/NotNullComment", {
            method: "POST",
            headers: { "Content-type": "application/json" },
            body: "",
          })
            .then((r) => r.json()) // 接收到回傳的物件，再用 .json() analyze資料
            .then((data) => {
              console.log(data);
              resultList = data;
              document.querySelector("table.restcommmentList tbody").innerHTML =
                "";
              data.forEach(function (element, index) {
                console.log(element);
                let tbody_html = document.createElement("tr");
                let tr_html = `<td class="">商品</td>
                          <td>評論ID</td>
                          <td>${element.restaurantCommentTime}</td>
                          <td>${element.commentRating}</td>
                          <td>
                            <a
                              class="comment_reply"
                              href="./restaurantbackend_commentreplyrestaurant.html"
                              data-listIndex="${index}"
                              >修改</a
                            >
                          </td>`;
                tbody_html.innerHTML = tr_html;
                document
                  .querySelector("table.restcommmentList tbody")
                  .append(tbody_html);
              });
              // sessionStorage;
              const table_html = document.getElementsByTagName("table");
              table_html[1].addEventListener("click", function (e) {
                if (e.target.tagName.toLowerCase() === "a") {
                  // e.preventDefault();
                  console.log(e);
                  // console.log(e.target.getAttribute("data-listIndex"));
                  let list_index = parseInt(
                    e.target.getAttribute("data-listIndex")
                  );
                  sessionStorage.setItem(
                    "reservationVO",
                    JSON.stringify(resultList[list_index])
                  );
                }
              });
            });
        } else if (choice == "商品評論") {
          fetch("http://localhost:8080/prodcomment/NotNullComment", {
            method: "POST",
            headers: { "Content-type": "application/json" },
            body: "",
          })
            .then((r) => r.json()) // 接收到回傳的物件，再用 .json() analyze資料
            .then((data) => {
              console.log(data);
              resultList = data;
              document.querySelector("table.prodcommmentList tbody").innerHTML =
                "";
              data.forEach(function (element, index) {
                console.log(element);
                let tbody_html = document.createElement("tr");
                let tr_html = `<td class="">商品</td>
                          <td>評論ID</td>
                          <td>${element.prodNo}</td>
                          <td>${element.prodCommentTime}</td>
                          <td>${element.prodCommentRating}</td>
                          <td>
                            <a
                              class="comment_reply"
                              href="./restaurantbackend_commentreplyprod.html"
                              data-listIndex="${index}"
                              >修改</a
                            >
                          </td>`;
                tbody_html.innerHTML = tr_html;
                document
                  .querySelector("table.prodcommmentList tbody")
                  .append(tbody_html);
              });
              // sessionStorage;
              const table_html = document.getElementsByTagName("table");
              table_html[0].addEventListener("click", function (e) {
                if (e.target.tagName.toLowerCase() === "a") {
                  // e.preventDefault();
                  // console.log(e);
                  console.log(e.target.getAttribute("data-listIndex"));
                  let list_index = parseInt(
                    e.target.getAttribute("data-listIndex")
                  );
                  sessionStorage.setItem(
                    "prodOrderDetailVO",
                    JSON.stringify(resultList[list_index])
                  );
                }
              });
            });
        }
      });
    </script>
  </body>
</html>
